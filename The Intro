-- Services
local TweenService = game:GetService("TweenService")
local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

-- GUI
local loadingGui = Instance.new("ScreenGui")
loadingGui.Name = "Y2HubLoading"
loadingGui.ResetOnSpawn = false
loadingGui.Parent = PlayerGui

-- التغويش في الخلفية
local blur = Instance.new("BlurEffect")
blur.Size = 20
blur.Parent = Lighting

-- الخلفية السوداء
local blurFrame = Instance.new("Frame")
blurFrame.Size = UDim2.new(0, 400, 0, 200)
blurFrame.Position = UDim2.new(0.5, -200, 0.5, -100)
blurFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
blurFrame.BackgroundTransparency = 0.3
blurFrame.BorderSizePixel = 0
blurFrame.Parent = loadingGui
blurFrame.ClipsDescendants = true
Instance.new("UICorner", blurFrame).CornerRadius = UDim.new(0, 15)

-- عنوان مع النجوم
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 50)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.Text = " Y2 Hub "
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Parent = blurFrame

-- كلمة جاري التحميل
local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(1, 0, 0, 40)
loadingText.Position = UDim2.new(0, 0, 0.3, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "جاري التحميل..."
loadingText.Font = Enum.Font.Gotham
loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingText.TextScaled = true
loadingText.Parent = blurFrame

-- شريط التحميل
local barBackground = Instance.new("Frame")
barBackground.Size = UDim2.new(0.8, 0, 0, 20)
barBackground.Position = UDim2.new(0.1, 0, 0.7, 0)
barBackground.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
barBackground.BorderSizePixel = 0
barBackground.Parent = blurFrame
Instance.new("UICorner", barBackground).CornerRadius = UDim.new(0, 10)

local barFill = Instance.new("Frame")
barFill.Size = UDim2.new(0, 0, 1, 0)
barFill.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
barFill.BorderSizePixel = 0
barFill.Parent = barBackground
Instance.new("UICorner", barFill).CornerRadius = UDim.new(0, 10)

-- الصوت الجديد
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://4590662766"
sound.Volume = 2
sound.Parent = loadingGui
sound:Play()

-- النجوم المتساقطة
for i = 1, 20 do
	local star = Instance.new("TextLabel")
	star.Text = ". "
	star.Font = Enum.Font.SourceSansBold
	star.TextSize = 18
	star.TextColor3 = Color3.fromRGB(255, 255, 255)
	star.BackgroundTransparency = 1
	star.Size = UDim2.new(0, 20, 0, 20)
	star.Position = UDim2.new(math.random(), 0, -0.1, 0)
	star.Parent = loadingGui

	local speed = math.random(3, 6)
	RunService.Heartbeat:Connect(function(dt)
		star.Position = UDim2.new(star.Position.X.Scale, 0, star.Position.Y.Scale + (dt / speed), 0)
		if star.Position.Y.Scale > 1.2 then
			star.Position = UDim2.new(math.random(), 0, -0.1, 0)
		end
	end)
end

-- حركة تعبئة الشريط
local tween = TweenService:Create(barFill, TweenInfo.new(3, Enum.EasingStyle.Linear), {Size = UDim2.new(1, 0, 1, 0)})
tween:Play()

-- إخفاء الواجهة بعد التحميل + رستارت للشخصية
tween.Completed:Connect(function()
	wait(0.5)
	blur:Destroy()
	loadingGui:Destroy()

	-- إعادة تشغيل الشخصية
	local char = Players.LocalPlayer.Character
	if char then
		char:BreakJoints()
	end
end)
